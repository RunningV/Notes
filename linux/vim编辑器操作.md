#### 一. vim 编辑器4种基本模式
##### 1. 普通模式(Normal mode)
Vim强大的编辑能来自于其普通模式命令。普通模式命令往往需要一个操作符结尾。例如普通模式命令dd删除当前行，但是第一个"d"的后面可以跟另外的移动命令来代替第二个d，比如用移动到下一行的"j"键就可以删除当前行和下一行。另外还可以指定命令重复次数，2dd（重复dd两次），和dj的效果是一样的。用户学习了各种各样的文本间移动／跳转的命令和其他的普通模式的编辑命令，并且能够灵活组合使用的话，能够比那些没有模式的编辑器更加高效的进行文本编辑。
##### 2. 插入模式(Insert mode)
在普通模式中，有很多方法可以进入插入模式。比较普通的方式是按a（append／追加）键或者i（insert／插入）键
在插入模式中，可以按ESC键回到普通模式。
##### 3. 选择模式(Select mode)
这个模式和无模式编辑器的行为比较相似（Windows标准文本控件的方式）。这个模式中，可以用鼠标或者光标键高亮选择文本，不过输入任何字符的话，Vim会用这个字符替换选择的高亮文本块，并且自动进入插入模式。
##### 4. 命令行模式(Command line mode)
在命令行模式中可以输入会被解释成并执行的文本。例如执行命令（:键），搜索（/和?键）或者过滤命令（!键）。在命令执行之后，Vim返回到命令行模式之前的模式，通常是普通模式。

#### 二. 3种常用模式的切换
vim启动进入普通模式，处于插入模式或命令行模式时只需要按Esc或者Ctrl+[(这在vim课程环境中不管用)即可进入普通模式。普通模式中按i（插入）或a（附加）键都可以进入插入模式，普通模式中按:进入命令行模式。命令行模式中输入wq回车后保存并退出vim。
普通模式  > 插入模式
```
命令  说明
i   在当前光标处进行编辑
I   在行首插入
A   在行末插入
a   在光标后插入编辑
o   在当前行后插入一个新行
O   在当前行前插入一个新行
cw  替换从光标所在位置后到一个单词结尾的字符
```

普通模式下删除文本
```
命令  说明
x   删除游标所在的字符
X   删除游标所在前一个字符
Delete  同x
dd  删除整行
dw  删除一个单词（不适用中文）
d$或D    删除至行尾
d^  删除至行首
dG  删除到文档结尾处
d1G 删至文档首部
```
除此之外，你还可以在命令之前加上数字，表示一次删除多行，如：
2dd表示一次删除2行

行间跳转
```
命令  说明
nG(n Shift+g)   鼠标移动到第n行
(如果默认没有显示行号，请先进入命令模式，输入:set nu以显示行号)
gg  游标移动到到第一行
G(Shift+g)  到最后一行
```

行内跳转
普通模式下使用下列命令在行内按照单词为单位进行跳转
```
命令  说明
w   到下一个单词的开头
e   到下一个单词的结尾
b   到前一个单词的开头
ge  到前一个单词的结尾
0或^ 到行头
$   到行尾
f<字母>   向后搜索<字母>并跳转到第一个匹配的位置(非常实用)
F<字母>   向前搜索<字母>并跳转到第一个匹配的位置
t<字母>   向后搜索<字母>并跳转到第一个匹配位置之前的一个字母(不常用)
T<字母>   向前搜索<字母>并跳转到第一个匹配位置之后的一个字母(不常用)
```

复制及粘贴文本
普通模式中使用y复制
```
yy   复制游标所在的整行（3yy表示复制3行）
y^   复制至行首，或y0。不含光标所在处字符。
y$   复制至行尾。含光所在处字符。
yw   复制一个单词。
y2w  复制两个单词。
yG   复制至文本末。
y1G  复制至文本开头。
普通模式中使用p粘贴

p(小写)   代表粘贴至光标后（下）
P(大写)   代表粘贴至光标前（上）
```

剪切及粘贴
```
dd删除命令就是剪切，你每次dd删除文档内容后，便可以使用p来粘贴，
也这一点可以让我们实现一个很爽快的功能——交换上下行：
ddp,就这么简单
```

替换和撤销(Undo)命令
替换和Undo命令都是针对普通模式下的操作
```
命令  说明
r+<待替换字母>   将游标所在字母替换为指定字母
R   连续替换，直到按下Esc
cc  替换整行，即删除游标所在行，并进入插入模式
cw  替换一个单词，即删除一个单词，并进入插入模式
C(大写)   替换游标以后至行末
~   反转游标所在字母大小写
u{n}    撤销一次或n次操作
U(大写)   撤销当前行的所有修改
Ctrl+r  redo，即撤销undo的操作
```

使用命令进行快速调整缩进操作
这一小节学习如何在vim中进行快速缩进，缩进操作均在普通模式下有效
```
15G     跳转到15行
>>      整行将向右缩进（使用，用于格式化代码超爽）
<<      整行向左回退
```

shiftwidth命令设置缩进的字符数
```
:set shiftwidth=10
```

调整文本位置
```
:le     居左
:ce     居中
:ri     居右
```

快速查找
```
普通模式下输入/然后键入需要查找的字符串 按回车后就会进行查找。
？与/功能相同，只不过？是向上而/是向下查找。 
进入查找之后，输入n和N可以继续查找 n表示继续查找，N反向查找
```

高级查找
```
\*      寻找游标所在处的单词
\#      同上，但 \* 是向前（上）找，#则是向后（下）找
g\*     同\* ，但部分符合该单词即可
g\#     同\# ，但部分符合该单词即可
```

#### 三、 多文件编辑
1.使用vim编辑多个文件
```
编辑多个文件有两种形式，一种是在进入vim前使用的参数就是多个文件。
另一种就是进入vim后再编辑其他的文件。 同时创建两个新文件并编辑

$ vim 1.txt 2.txt
默认进入1.txt文件的编辑界面

:n编辑2.txt文件，可以加!即:n!强制切换，
注：之前一个文件的输入没有保存，仅仅切换到另一个文件
:N编辑1.txt文件，可以加!即:N!强制切换，
注：之前文件内的输入没有保存，仅仅是切换到另一个文件
```
2.进入vim后打开新文件
```
:e      3.txt 打开新文件3.txt
:e#     回到前一个文件
:ls     可以列出以前编辑过的文档
:b      2.txt（或者编号）可以直接进入文件2.txt编辑
:bd     2.txt（或者编号）可以删除以前编辑过的列表中的文件项目
:e!     4.txt，新打开文件4.txt，放弃正在编辑的文件
:f      显示正在编辑的文件名
:f new.txt，改变正在编辑的文件名字为new.txt
```
3.恢复文件
```
如果因为断电等原因造成文档没有保存，可以采用恢复方式，
vim -r进入文档后，输入:ewcover 1.txt来恢复
```
可视模式命令
```
v(小写)，进入字符选择模式，就可以移动光标，光标走过的地方就会选取。
再次按下v会后就会取消选取。
Shift+v（小写），进入行选择模式，按下V之后就会把整行选取，
您可以上下移动光标选更多的行，同样，再按一次Shift+v就可以取消选取。
Ctrl+v（小写），这是区域选择模式，可以进行矩形区域选择，再按一次Ctrl+v取消选取
d   删除选取区域内容
y   复制选取区域内容
```

vim可以在一个界面里打开多个窗口进行编辑，这些编辑窗口称为vim的视窗。 
```
打开方法有很多种，例如可以使用在命令行模式下输入:new 
打开一个新的vim视窗，并进入视窗编辑一个新文件（普通模式下输入Ctrl+w也可以）

:sp         1.txt 打开新的横向视窗来编辑1.txt
:vsp        2.txt 打开新的纵向视窗来编辑1.txt
Ctrl-w s    将当前窗口分割成两个水平的窗口
Ctrl-w v    将当前窗口分割成两个垂直的窗口
Ctrl-w q    即 :q 结束分割出来的视窗。如果在新视窗中有输入需要使用强制符！即:q!
Ctrl-w o    打开一个视窗并且隐藏之前的所有视窗
Ctrl-w j    移至下面视窗
Ctrl-w k    移至上面视窗
Ctrl-w h    移至左边视窗
Ctrl-w l    移至右边视窗
Ctrl-w J    将当前视窗移至下面
Ctrl-w K    将当前视窗移至上面
Ctrl-w H    将当前视窗移至左边
Ctrl-w L    将当前视窗移至右边
Ctrl-w -    减小视窗的高度
Ctrl-w +    增加视窗的高度
```

创建加密文档
`$ vim -x file1`

在vim执行外部命令
在命令行模式中输入!可以执行外部的shell命令
```
:!ls 用于显示当前目录的内容
:!rm FILENAME用于删除名为 FILENAME 的文件
:w FILENAME可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件
```

功能设定
```
1.vim的功能设定
可以在编辑文件的时候进行功能设定，如命令行模式下输入:set nu（显示行数），
设定值退出vim后不会保存。要永久保存配置需要修改vim配置文件。 
vim的配置文件~/.vimrc，可以打开文件进行修改，不过务必小心不要影响vim正常使用

2.获取目前的设定
:set或者:se显示所有修改过的配置
:set all 显示所有的设定值
:set option? 显示option的设定值
:set nooption 取消当期设定值
3.set功能的说明
:set autoindent(ai) 设置自动缩进
:set autowrite(aw) 设置自动存档，默认未打开
:set background=dark或light，设置背景风格
:set backup(bk) 设置自动备份，默认未打开
: set cindent(cin) 设置C语言风格缩进
```
